<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>üì¶ HTB - Magic | 0xNinja - My blog</title><meta name=keywords content="htb,writeup"><meta name=description content="TL;DR HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no $PATH check.
 As I am an idiot, I reinstalled my distribution without making a backup of my files üôà So I don&rsquo;t have any screenshot or payloads I used for this box to show you
 Footholds With a basic nmap we found only two ports: 22 and 80."><meta name=author content="0xNinja"><link rel=canonical href=http://example.org/posts/htb-magic/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ba88f41f11a10b879278bfa0e5f4846fcc23eb1705121ab38cfd85f1b1749b7f.css integrity="sha256-uoj0HxGhC4eSeL+g5fSEb8wj6xcFEhqzjP2F8bF0m38=" rel="preload stylesheet" as=style><link rel=icon href=http://example.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://example.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://example.org/favicon-32x32.png><link rel=apple-touch-icon href=http://example.org/apple-touch-icon.png><link rel=mask-icon href=http://example.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.1"><meta property="og:title" content="üì¶ HTB - Magic"><meta property="og:description" content="TL;DR HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no $PATH check.
 As I am an idiot, I reinstalled my distribution without making a backup of my files üôà So I don&rsquo;t have any screenshot or payloads I used for this box to show you
 Footholds With a basic nmap we found only two ports: 22 and 80."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/htb-magic/"><meta property="og:image" content="http://example.org/box.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-20T14:00:00+00:00"><meta property="article:modified_time" content="2020-08-20T14:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://example.org/box.png"><meta name=twitter:title content="üì¶ HTB - Magic"><meta name=twitter:description content="TL;DR HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no $PATH check.
 As I am an idiot, I reinstalled my distribution without making a backup of my files üôà So I don&rsquo;t have any screenshot or payloads I used for this box to show you
 Footholds With a basic nmap we found only two ports: 22 and 80."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://example.org/posts/"},{"@type":"ListItem","position":2,"name":"üì¶ HTB - Magic","item":"http://example.org/posts/htb-magic/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"üì¶ HTB - Magic","name":"üì¶ HTB - Magic","description":"TL;DR HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no $PATH check.\n As I am an idiot, I reinstalled my distribution without making a backup of my files üôà So I don\u0026rsquo;t have any screenshot or payloads I used for this box to show you\n Footholds With a basic nmap we found only two ports: 22 and 80.","keywords":["htb","writeup"],"articleBody":"TL;DR HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no $PATH check.\n As I am an idiot, I reinstalled my distribution without making a backup of my files üôà So I don‚Äôt have any screenshot or payloads I used for this box to show you\n Footholds With a basic nmap we found only two ports: 22 and 80.\nThe running web server seems to be a portfolio, we can also note a login page for the administrator.\nEntry point Admin page I thought it would be great to access this admin page, but I did not found any valid credentials to log myself in. What I did instead was:\n Use BurpSuite to intercept my requests to the /admin page Change the 302 - /login redirection code to 200 - /admin on response Now got access to the page without login-in  Of course after reading other solutions, this one was really unintented, the ‚Äònormal‚Äô way was to make an SQL injection in the login form.\nFile upload Now that we are on the admin page, we can upload some pictures in order to display them on the homepage. The first thing that came to my mind was to upload a PHP reverse shell:\nIf we upload it and visit it we got our nice reverse shell working!\nUser We are in the machine, but need to privesc as a user. Looking in the server‚Äôs directory I found an intersting db.php5 file:\n1 2 3 4 5 6  class Database { private static $dbName = 'Magic' ; private static $dbHost = 'localhost' ; private static $dbUsername = 'theseus'; private static $dbUserPassword = 'iamkingtheseus';   We try to log as the mentioned user with the given password. It does not works. Maybe it is some valid SQL credentials? I also found a mysqldump binary on the system, which ‚Äì pay attention ‚Äì dumps a given MySQL schema.\n1  $ mysqldumps -u theseus -p iamthekingtheseus --all-databases   We then get a new password: admin:Th3s3usW4sK1ng. Maybe this one is the user‚Äôs password? We can log-in with theseus:Th3s3usW4sK1ng!\nRoot We now need to get as root!\nBy looking into /bin/ we get an interesting binary sysinfo running with UID=0 üòá\nThis binary basically fetches information on the system and outputs it on stdout.\nHere, the vulnerability is: the binary executes some commands (such as lswh -short, lsblk -l‚Ä¶) without an absolute path to them. We can easilly create our own lswh binary and change our $PATH to trick this program to execute our code as root (UID=0)!\nThis is what I did:\n1 2 3 4 5 6 7 8 9 10 11 12  $ cd /tmp $ mkdir .ninja \u0026\u0026 cd .ninja $ echo 'echo $(whoami)'  lshw $ chmod +x lshw $ export PATH=/tmp/.ninja:$PATH $ sysinfo [...] ====================Hardware Info==================== root # ===================================================== [...]   By now we only have to cat /root/root.txt, or create ourselves a reverse shell, add our SSH key to the box, or anything!\n1 2 3 4 5 6 7 8  $ echo 'cat /root/root.txt'  lshw $ sysinfo [...] ====================Hardware Info==================== [/root/root.txt hash here üòÄ] ===================================================== [...]   Sorry for this bad writeup, I lost all my files, payloads and notes but I tryied my best.\n","wordCount":"557","inLanguage":"en","image":"http://example.org/box.png","datePublished":"2020-08-20T14:00:00Z","dateModified":"2020-08-20T14:00:00Z","author":{"@type":"Person","name":"0xNinja"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.org/posts/htb-magic/"},"publisher":{"@type":"Organization","name":"0xNinja - My blog","logo":{"@type":"ImageObject","url":"http://example.org/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: #1d1e20;--entry: #2e2e33;--primary: rgba(255, 255, 255, 0.84);--secondary: rgba(255, 255, 255, 0.56);--tertiary: rgba(255, 255, 255, 0.16);--content: rgba(255, 255, 255, 0.74);--hljs-bg: #2e2e33;--code-bg: #37383e;--border: #333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=http://example.org/ accesskey=h title="0xNinja - My blog (Alt + H)">0xNinja - My blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://example.org/about/ title="ü•∑ About"><span>ü•∑ About</span></a></li><li><a href=http://example.org/archives/ title="üìù Archives"><span>üìù Archives</span></a></li><li><a href=http://example.org/tags/ title="üè∑Ô∏è Tags"><span>üè∑Ô∏è Tags</span></a></li><li><a href=http://example.org/projects/ title="üî¨ Projects"><span>üî¨ Projects</span></a></li><li><a href=http://example.org/search/ title="üîé Search (Alt + /)" accesskey=/><span>üîé Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://example.org/>Home</a>&nbsp;¬ª&nbsp;<a href=http://example.org/posts/>Posts</a></div><h1 class=post-title>üì¶ HTB - Magic</h1><div class=post-meta>August 20, 2020&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;0xNinja</div></header><figure class=entry-cover><img loading=lazy srcset="http://example.org/posts/htb-magic/box_huba19b62044f1fcd80252bc62cda1127f_62418_360x0_resize_box_2.png 360w ,http://example.org/posts/htb-magic/box_huba19b62044f1fcd80252bc62cda1127f_62418_480x0_resize_box_2.png 480w ,http://example.org/posts/htb-magic/box_huba19b62044f1fcd80252bc62cda1127f_62418_720x0_resize_box_2.png 720w ,http://example.org/posts/htb-magic/box.png 968w" sizes="(min-width: 768px) 720px, 100vw" src=http://example.org/posts/htb-magic/box.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#tldr aria-label=TL;DR>TL;DR</a></li><li><a href=#footholds aria-label=Footholds>Footholds</a></li><li><a href=#entry-point aria-label="Entry point">Entry point</a><ul><li><a href=#admin-page aria-label="Admin page">Admin page</a></li><li><a href=#file-upload aria-label="File upload">File upload</a></li></ul></li><li><a href=#user aria-label=User>User</a></li><li><a href=#root aria-label=Root>Root</a></li></ul></div></details></div><div class=post-content><h2 id=tldr>TL;DR<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><p>HTTP redirect bypass (unintended üòÅ), PHP code execution through file upload to get a reverse shell. User with hardcoded SQL credentials on server, privesc with custom binary with no <code>$PATH</code> check.</p><blockquote><p>As I am an idiot, I reinstalled my distribution without making a backup of my files üôà
So I don&rsquo;t have any screenshot or payloads I used for this box to show you</p></blockquote><h2 id=footholds>Footholds<a hidden class=anchor aria-hidden=true href=#footholds>#</a></h2><p>With a basic <code>nmap</code> we found only two ports: 22 and 80.</p><p>The running web server seems to be a portfolio, we can also note a login page for the administrator.</p><h2 id=entry-point>Entry point<a hidden class=anchor aria-hidden=true href=#entry-point>#</a></h2><h3 id=admin-page>Admin page<a hidden class=anchor aria-hidden=true href=#admin-page>#</a></h3><p>I thought it would be great to access this admin page, but I did not found any valid credentials to log myself in. What I did instead was:</p><ol><li>Use BurpSuite to intercept my requests to the <code>/admin</code> page</li><li>Change the <code>302 -> /login</code> redirection code to <code>200 -> /admin</code> on response</li><li>Now got access to the page without login-in</li></ol><p>Of course after reading other solutions, this one was really unintented, the &lsquo;normal&rsquo; way was to make an SQL injection in the login form.</p><h3 id=file-upload>File upload<a hidden class=anchor aria-hidden=true href=#file-upload>#</a></h3><p>Now that we are on the admin page, we can upload some pictures in order to display them on the homepage. The first thing that came to my mind was to upload a PHP reverse shell:</p><p><img loading=lazy src=reverse.png alt="reverse shell"></p><p>If we upload it and visit it we got our nice reverse shell working!</p><h2 id=user>User<a hidden class=anchor aria-hidden=true href=#user>#</a></h2><p>We are in the machine, but need to privesc as a user. Looking in the server&rsquo;s directory I found an intersting <code>db.php5</code> file:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Database</span>
{
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> $dbName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Magic&#39;</span> ;
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> $dbHost <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;localhost&#39;</span> ;
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> $dbUsername <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;theseus&#39;</span>;
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> $dbUserPassword <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;iamkingtheseus&#39;</span>;
</code></pre></td></tr></table></div></div><p>We try to log as the mentioned user with the given password. It does not works. Maybe it is some valid SQL credentials? I also found a <code>mysqldump</code> binary on the system, which &ndash; pay attention &ndash; dumps a given MySQL schema.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mysqldumps -u theseus -p iamthekingtheseus --all-databases
</code></pre></td></tr></table></div></div><p>We then get a new password: <code>admin:Th3s3usW4sK1ng</code>. Maybe this one is the user&rsquo;s password? We can log-in with <code>theseus:Th3s3usW4sK1ng</code>!</p><h2 id=root>Root<a hidden class=anchor aria-hidden=true href=#root>#</a></h2><p>We now need to get as <code>root</code>!</p><p>By looking into <code>/bin/</code> we get an interesting binary <code>sysinfo</code> running with <code>UID=0</code> üòá</p><p>This binary basically fetches information on the system and outputs it on stdout.</p><p>Here, the vulnerability is: the binary executes some commands (such as <code>lswh -short</code>, <code>lsblk -l</code>&mldr;) without an absolute path to them. We can easilly create our own <code>lswh</code> binary and change our <code>$PATH</code> to trick this program to execute our code as <code>root</code> (<code>UID=0</code>)!</p><p>This is what I did:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cd /tmp
$ mkdir .ninja <span style=color:#f92672>&amp;&amp;</span> cd .ninja
$ echo <span style=color:#e6db74>&#39;echo $(whoami)&#39;</span> &gt; lshw
$ chmod +x lshw
$ export PATH<span style=color:#f92672>=</span>/tmp/.ninja:$PATH
$ sysinfo

<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
<span style=color:#f92672>====================</span>Hardware Info<span style=color:#f92672>====================</span>
root    <span style=color:#75715e># &lt;-- our code execution!</span>
<span style=color:#f92672>=====================================================</span>
<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
</code></pre></td></tr></table></div></div><p>By now we only have to cat <code>/root/root.txt</code>, or create ourselves a reverse shell, add our SSH key to the box, or anything!</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ echo <span style=color:#e6db74>&#39;cat /root/root.txt&#39;</span> &gt; lshw
$ sysinfo

<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
<span style=color:#f92672>====================</span>Hardware Info<span style=color:#f92672>====================</span>
<span style=color:#f92672>[</span>/root/root.txt hash here üòÄ<span style=color:#f92672>]</span>
<span style=color:#f92672>=====================================================</span>
<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
</code></pre></td></tr></table></div></div><p>Sorry for this bad writeup, I lost all my files, payloads and notes but I tryied my best.</p><p><img loading=lazy src=rooted.png alt=Rooted></p></div><footer class=post-footer><ul class=post-tags><li><a href=http://example.org/tags/htb/>htb</a></li><li><a href=http://example.org/tags/writeup/>writeup</a></li></ul><nav class=paginav><a class=prev href=http://example.org/posts/sqli-lab/><span class=title>¬´ Prev Page</span><br><span>SQLi lab solutions</span></a>
<a class=next href=http://example.org/posts/htb-obscurity/><span class=title>Next Page ¬ª</span><br><span>üì¶ HTB - Obscurity</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=http://example.org/>0xNinja - My blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerText='copy';function copyingDone(){copybutton.innerText='copied!';setTimeout(()=>{copybutton.innerText='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>