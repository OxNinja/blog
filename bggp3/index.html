<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun - 0xNinja - My blog</title><meta name=Description content="My personnal blog"><meta property="og:title" content="üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun"><meta property="og:description" content="So this summer - and it has been this for the past 2 years - the famous Binary Golfing Grand Prix took place online for it&rsquo;s 3rd edition, and of course I decided to give it a try.
After getting to try my best at golfing binaries (see my golfing posts), I had to race this competition for fun and learn a lot about fuzzing - as I have never fuzzed before."><meta property="og:type" content="article"><meta property="og:url" content="https://0xninja.fr/bggp3/"><meta property="og:image" content="https://0xninja.fr/bggp3/featured-image.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-18T19:00:00+00:00"><meta property="article:modified_time" content="2022-07-18T19:00:00+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://0xninja.fr/bggp3/featured-image.png"><meta name=twitter:title content="üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun"><meta name=twitter:description content="So this summer - and it has been this for the past 2 years - the famous Binary Golfing Grand Prix took place online for it&rsquo;s 3rd edition, and of course I decided to give it a try.
After getting to try my best at golfing binaries (see my golfing posts), I had to race this competition for fun and learn a lot about fuzzing - as I have never fuzzed before."><meta name=application-name content="0xNinja.fr"><meta name=apple-mobile-web-app-title content="0xNinja.fr"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://0xninja.fr/bggp3/><link rel=prev href=https://0xninja.fr/xchg-rax-rax/><link rel=next href=https://0xninja.fr/lkm-00/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/0xninja.fr\/bggp3\/"},"image":[{"@type":"ImageObject","url":"https:\/\/0xninja.fr\/bggp3\/featured-image.png","width":629,"height":225}],"genre":"posts","keywords":"bggp, low-level, reverse, golf, js, fuzz","wordcount":1593,"url":"https:\/\/0xninja.fr\/bggp3\/","datePublished":"2022-07-18T19:00:00+00:00","dateModified":"2022-07-18T19:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"0xNinja","logo":"https:\/\/0xninja.fr\/images\/avatar.png"},"author":{"@type":"Person","name":"0xNinja"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="0xNinja - My blog"><span class=header-title-pre>ü•∑</span><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>üìù Posts </a><a class=menu-item href=/tags/>üè∑Ô∏è Tags </a><a class=menu-item href=/categories/>üìö Categories </a><a class=menu-item href=/projects/>üî¨ Projects </a><a class=menu-item href=/about/>ü•∑ About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="0xNinja - My blog"><span class=header-title-pre>ü•∑</span><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>üìùPosts</a><a class=menu-item href=/tags/ title>üè∑Ô∏èTags</a><a class=menu-item href=/categories/ title>üìöCategories</a><a class=menu-item href=/projects/ title>üî¨Projects</a><a class=menu-item href=/about/ title>ü•∑About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://0xninja.fr title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>0xNinja</a></span>&nbsp;<span class=post-category>included in <a href=/categories/binary-golfing/><i class="far fa-folder fa-fw" aria-hidden=true></i>Binary golfing</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-07-18>2022-07-18</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1593 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;8 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/bggp3/featured-image.png data-srcset="/bggp3/featured-image.png, /bggp3/featured-image.png 1.5x, /bggp3/featured-image.png 2x" data-sizes=auto alt=/bggp3/featured-image.png title=/bggp3/featured-image.png></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#what-is-fuzzing>What is fuzzing?</a></li><li><a href=#chosing-target>Chosing target</a></li><li><a href=#instrumentation>Instrumentation</a></li><li><a href=#minimizing-test-cases>Minimizing test cases</a></li><li><a href=#fuzzing>Fuzzing</a></li><li><a href=#getting-a-crash>Getting a crash</a></li><li><a href=#bonus-points>Bonus points</a></li><li><a href=#struggles-or-real-history>Struggles (or real history)</a><ul><li><a href=#act-i-shock>Act I: shock</a></li><li><a href=#act-ii-denial>Act II: denial</a></li><li><a href=#act-iii-anger>Act III: anger</a></li><li><a href=#act-iv-bargaining>Act IV: bargaining</a></li><li><a href=#act-v-depression>Act V: depression</a></li><li><a href=#act-vi-testing>Act VI: testing</a></li><li><a href=#act-vii-acceptance>Act VII: acceptance</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>So this summer - and it has been this for the past 2 years - the famous <a href=https://tmpout.sh/bggp/3/ target=_blank rel="noopener noreffer">Binary Golfing Grand Prix</a> took place online for it&rsquo;s 3rd edition, and of course I decided to give it a try.</p><p>After getting to try my best at golfing binaries (<a href=/tags/golf/ rel>see my golfing posts</a>), I had to race this competition for fun and learn a lot about fuzzing - as I have never fuzzed before.</p><h2 id=what-is-fuzzing>What is fuzzing?</h2><p>Fuzzing a binary is like bruteforcing a binary&rsquo;s input (cmd args, input file&mldr;) in order to get an odd behaviour, a bug or even the holy crash.</p><p>There are a lot of tools in order to help users to fuzz a binary and optimize the results (execs/s, payload mutation, harnesses&mldr;) and they are pretty easy to use.</p><p>The first tutorials online and my own knowledge led me to the famous <code>AFL</code>, or more exactly it&rsquo;s big brother <code>AFL++</code>. So I will go with this tool for this grand prix in order to familiarize myself with it.</p><h2 id=chosing-target>Chosing target</h2><div class="details admonition danger open"><div class="details-summary admonition-title"><i class="icon fas fa-skull-crossbones fa-fw" aria-hidden=true></i>Spoiler<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>If you want to follow my journey in the real events timeline, <a href=#struggles-or-real-history rel>click here</a>.</div></div></div><p>Looking by curiosity what are all the known JavaScript engines (and there are a lot of them), one caught my attention: <a href=https://github.com/espruino/espruino target=_blank rel="noopener noreffer">Espruino</a>.</p><p>I thought this project was in the spirit of the minimalism, and thus wanted to see if it was enough to avoid crashes.</p><p>Especialy design for embeeded devices and IoT, still maintained after more than 7 years, this project was a good practice for fuzzing.</p><h2 id=instrumentation>Instrumentation</h2><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>For this fuzzing project, I used the AFL++ Docker container, mapping the code of the target in <code>/src</code>.</div></div></div><p>The first step for fuzzing, we have to prepare the target binary. ALF uses a custom GCC in order to optimize results and explore the binary. We have to build the binary from source and patch the Makefile.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gd>--- a/Makefile
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+++ b/Makefile
</span></span></span><span class=line><span class=cl><span class=gi></span><span class=gu>@@ -1,8 +1,12 @@
</span></span></span><span class=line><span class=cl><span class=gu></span><span class=gd>- CC = gcc
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ CC = afl-gcc
</span></span></span></code></pre></td></tr></table></div></div><p>In more complex project, you will have to also change the compiler to <code>alf-clang-fast++</code>, add some compilation flags for optimizations, and even have to patch the <code>main() {}</code> function for AFL.</p><p>On compilation you should see some warnings/infos from AFL:</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/bggp3/1.png data-srcset="/bggp3/1.png, /bggp3/1.png 1.5x, /bggp3/1.png 2x" data-sizes=auto alt=/bggp3/1.png title=/bggp3/1.png width=585 height=104></p><p>I will copy the built binary in <code>/usr/local/bin/</code>, and create a new directory for this fuzzing:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$HOME</span>
</span></span><span class=line><span class=cl>mkdir in <span class=c1># our inputs for the fuzzer</span>
</span></span><span class=line><span class=cl>mkdir out <span class=c1># outputs of the fuzzer (crashes, test queue...)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=minimizing-test-cases>Minimizing test cases</h2><p>The next step is to get good test cases to speed up the process of fuzzing. The fuzzer will base its mutations on those test cases, so the more unique tests you have, the better.</p><p>By chance, most projects have good tests in their <code>/tests/</code> directory, so let&rsquo;s copy them to our inputs:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp /src/tests/*.js in/
</span></span></code></pre></td></tr></table></div></div><p>Once again, for optimizations, it is a good practice to minimize the test cases, it can save a lot of time during fuzz.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir min <span class=c1># our minimized inputs</span>
</span></span><span class=line><span class=cl>afl-cmin -i in -o min -- <span class=nv>$TARGET</span> @@ <span class=c1># minify the tests for the target</span>
</span></span><span class=line><span class=cl><span class=c1># the &#39;@@&#39; stands for the input file</span>
</span></span><span class=line><span class=cl><span class=c1># ie. for the target /bin/cat, we would use:</span>
</span></span><span class=line><span class=cl><span class=c1># afl-cmin -i in -o min -- /bin/cat @@</span>
</span></span></code></pre></td></tr></table></div></div><p>After running the command (this will take a while if you have hundreds of cases) we now have a lot more efficient test cases in our <code>min</code> dir.</p><h2 id=fuzzing>Fuzzing</h2><p>Now that we have our test cases ready, let&rsquo;s get to fuzing!</p><p>As simple as that:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>afl-fuzz -i min -o out -- <span class=nv>$TARGET</span> @@
</span></span></code></pre></td></tr></table></div></div><p>We can also add the <code>-D</code> options for mutating random bytes in the payload, and it is recommanded for better results, despite of increasing by a lot the time of fuzzing.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Pro tips for fuzzing<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>You can multithread AFL:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># create a master process</span>
</span></span><span class=line><span class=cl>afl-fuzz -M name1 -- <span class=nv>$TARGET</span> @@
</span></span><span class=line><span class=cl><span class=c1># create a slave</span>
</span></span><span class=line><span class=cl>afl-fuzz -S name2 -- <span class=nv>$TARGET</span> @@
</span></span></code></pre></td></tr></table></div></div><p>The processes will communicate together and trade their payloads.</p></div></div></div><h2 id=getting-a-crash>Getting a crash</h2><p>Within a few minutes I got a crash on the binary with fuzzing, and I got hundreds the first day, pretty nice.</p><p>The first crashes were &ldquo;only&rdquo; some SEGFAULT, and the files were also already a bit tiny: <strong>79 bytes for a crash</strong>.</p><p>So my first crash was due to the following file (base64):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ZnVuY3Rpb64gZigpIHsKfQoKYSA9IFsKICB2b2lkIDAsCiAgdm9pZCBmLAogIHZvaWQgZigpCl07
</span></span><span class=line><span class=cl>CgpyZXN1bHQgPSBhID09ICIsLCI7Cg==
</span></span></code></pre></td></tr></table></div></div><p>Which gives:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>functio</span> <span class=nx>f</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>a</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=k>void</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>void</span> <span class=nx>f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>void</span> <span class=nx>f</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>result</span> <span class=o>=</span> <span class=nx>a</span> <span class=o>==</span> <span class=s2>&#34;,,&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>This code crashes Espruino with no error message, only a SEGFAULT. My guess here was that the parsing code had an issue with the <code>functio f() {}</code> part, and crashes the program, maybe a lexer issue due to invalid token?</p><div class="details admonition success open"><div class="details-summary admonition-title"><i class="icon fas fa-check-circle fa-fw" aria-hidden=true></i>Final payload<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>After some time I managed to minimize the payload down to <strong>4 bytes</strong>: <code>da5sCg==</code> or in hex <code>75ae 6c0a</code>. So I have here a 4-bytes SEGFAULT.</div></div></div><p>I also got one buffer overflow of 1.5kB but I never managed to reproduce it on any other system, I concluded that this was a glitch in the matrix and cried a lot, because usualy you only get SEGFAULT or SIG_ABORT crashes, a BoF would have been the cherry on top.</p><p>But I got a lot of crashes tho:</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/bggp3/goodbye.png data-srcset="/bggp3/goodbye.png, /bggp3/goodbye.png 1.5x, /bggp3/goodbye.png 2x" data-sizes=auto alt=/bggp3/goodbye.png title=/bggp3/goodbye.png width=643 height=367></p><p>(Don&rsquo;t mind the low amount of exec/s here, the first day I got ~100 exec/s but with time it decreased due to the size of the payloads in the corpus)</p><h2 id=bonus-points>Bonus points</h2><p>With only 4 bytes there was only a few bytes of improvement possible, so I decided to dig into the bug. Too bad that this caused only a SEGFAULT.</p><p>After some time of code analysis, coding, guessing and compiling, I managed to patch the bug in an ugly way, but made a pull request anyways, which was not merged, but instead the developpers made an other patch in order to fix this. So I guess this counts?</p><p><a href=https://github.com/espruino/Espruino/commit/4cce3caa21c8ae5b8f7f4441379b65d777aa3164 target=_blank rel="noopener noreffer">Link of the final patch</a>.</p><h2 id=struggles-or-real-history>Struggles (or real history)</h2><p>In this section you will read the truth about my fuzzing journey, how much time it took, my mistakes and so on&mldr;</p><h3 id=act-i-shock>Act I: shock</h3><p>The day I started to run for this competition, radareorg released a new version of their radare2 tool. Imagine getting a crash on the latest version of one of your favorite tools üòç</p><p>I started to fuzz like I explained in this post, but after days of fuzzing, all I had was a corpus of 2000 files and 6 hangs, which does not count as crash.</p><p>The bad part was also that I only had like 8-12 exec/s, which is very slow. And I had no clues about why and how.</p><h3 id=act-ii-denial>Act II: denial</h3><p>It was not my fault, right?</p><p>So I decided to switch of target. I went for Python 3.8. After building it, making test cases and min them, a day passed, and I started to fuzz for the night. Nothing after hours, not even a new find. There was a problem somewhere. It must be Python, I was thinking. Of course it was Python the problem, not me.</p><p>I switched of target many times, here is what I tried (you can try yourself to fuzz them if you want):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ls <span class=nv>$HOME</span>/fuzz
</span></span><span class=line><span class=cl>SimpleNES       nvim    radare2         PcapPlusPlus
</span></span><span class=line><span class=cl>dlib            inih    polybar         sql-parser
</span></span><span class=line><span class=cl>SameBoy         feh     nasm            python
</span></span><span class=line><span class=cl>vim
</span></span></code></pre></td></tr></table></div></div><h3 id=act-iii-anger>Act III: anger</h3><p>After trying dozens of projects to fuzz, I started to be a bit angry, or more precisely frustrated. I was trying to fuzz a binary to get a crash, but I got nothing for the past week. Angry at myself that I couldn&rsquo;t setup a simple fuzzing lab.</p><h3 id=act-iv-bargaining>Act IV: bargaining</h3><p>In order to save myself of myself, I started to try a lot of things, with my newly gained experience in fuzzing, I decided to go back to my original idea: <code>radare2</code>.</p><p>With that, I also read the manual and all the options for AFL++ in order to get better results, I even asked online for help, of course <span class="h-card person-mention"><a href=https://www.soeasy.re/ class="u-url url" title=Friend><img class="u-photo photo" src=https://www.soeasy.re/wp-content/uploads/2021/05/cropped-1.png alt=SoEasY>&#8201;<span class="p-nickname nickname">SoEasY</span></a></span> DMed me to help. He wasted some time with me, and we supposed that the <strong>low</strong> amount of exec/s was due to the fact that I start <code>r2</code> in interactive mode, and the process limit itself to a certain amount of threads, so the time the process kill itself in order to spawn a new one, it limits a lot the number of execs.</p><p>He also asked me to try other binaries of the <code>radare2</code> suite, even to write a harness for a specific function to fuzz.</p><h3 id=act-v-depression>Act V: depression</h3><p>Even with those tweaks and tries, there were no improvements in my results after 5 days of fuzzing. üò¢</p><p>I decided to take a break for days.</p><h3 id=act-vi-testing>Act VI: testing</h3><p>After my break I wanted to know why I did not have any results with my fuzzing. And for me the obvious reason was an issue of the famous 8th layer of the OSI model: the keyboard-chair interface.</p><p>For my previous choices, either it was a bad target, or I did things wrong.</p><h3 id=act-vii-acceptance>Act VII: acceptance</h3><p>The only way forward for me was to find an other target, and see if I get a crash easily.</p><p>Now that you have the past history of the project, see the real <a href=#chosing-target rel>fuzzing journey</a>.</p><h2 id=conclusion>Conclusion</h2><p>I made 11th out of 33 and I am very happy about that</p><p><a href=https://github.com/netspooky/BGGP/tree/main/2022#scored-entries target=_blank rel="noopener noreffer">Here you will find the final results including all the submitted entries for this year!</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-07-18</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/bggp3/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://0xninja.fr/bggp3/ data-title="üèåÔ∏è BGGP3 - How to crash a famous JS engine for fun" data-via=0x_Ninja data-hashtags=bggp,low-level,reverse,golf,js,fuzz><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://0xninja.fr/bggp3/ data-hashtag=bggp><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://0xninja.fr/bggp3/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://0xninja.fr/bggp3/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/bggp/>bggp</a>,&nbsp;<a href=/tags/low-level/>low-level</a>,&nbsp;<a href=/tags/reverse/>reverse</a>,&nbsp;<a href=/tags/golf/>golf</a>,&nbsp;<a href=/tags/js/>js</a>,&nbsp;<a href=/tags/fuzz/>fuzz</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/xchg-rax-rax/ class=prev rel=prev title="üîé xchg rax, rax"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>üîé xchg rax, rax</a>
<a href=/lkm-00/ class=next rel=next title="üîé Linux Kernel Module - Introduction">üîé Linux Kernel Module - Introduction<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.108.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://0xninja.fr target=_blank>0xNinja</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},data:{"id-1":"0xNinja","id-2":"0xNinja"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},twemoji:!0,typeit:{cursorChar:"|",cursorSpeed:1500,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:5e3,speed:150}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>