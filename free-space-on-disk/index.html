<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Free space on disk for Linux distros - 0xNinja - My blog</title><meta name=Description content="My personnal blog"><meta property="og:title" content="Free space on disk for Linux distros"><meta property="og:description" content="Recently I wanted to run a MySQL Docker container and encountered a tragical error:
1 2 3 4 5 6 7 simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql' simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.31-1debian10 started. simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Initializing database files simple_db | 2021-03-25T10:54:04.578298Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details)."><meta property="og:type" content="article"><meta property="og:url" content="https://0xninja.fr/free-space-on-disk/"><meta property="og:image" content="https://0xninja.fr/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-25T16:00:01+00:00"><meta property="article:modified_time" content="2021-03-25T16:00:01+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://0xninja.fr/logo.png"><meta name=twitter:title content="Free space on disk for Linux distros"><meta name=twitter:description content="Recently I wanted to run a MySQL Docker container and encountered a tragical error:
1 2 3 4 5 6 7 simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql' simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.31-1debian10 started. simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Initializing database files simple_db | 2021-03-25T10:54:04.578298Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details)."><meta name=application-name content="0xNinja.fr"><meta name=apple-mobile-web-app-title content="0xNinja.fr"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://0xninja.fr/free-space-on-disk/><link rel=prev href=https://0xninja.fr/htb-ready/><link rel=next href=https://0xninja.fr/tldr-tldr/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Free space on disk for Linux distros","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/0xninja.fr\/free-space-on-disk\/"},"image":["https:\/\/0xninja.fr\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"disk, linux, partition","wordcount":455,"url":"https:\/\/0xninja.fr\/free-space-on-disk\/","datePublished":"2021-03-25T16:00:01+00:00","dateModified":"2021-03-25T16:00:01+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"0xNinja","logo":"https:\/\/0xninja.fr\/images\/avatar.png"},"author":{"@type":"Person","name":"0xNinja"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="0xNinja - My blog"><span class=header-title-pre>🥷</span><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>📝 Posts </a><a class=menu-item href=/tags/>🏷️ Tags </a><a class=menu-item href=/categories/>📚 Categories </a><a class=menu-item href=/projects/>🔬 Projects </a><a class=menu-item href=/about/>🥷 About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="0xNinja - My blog"><span class=header-title-pre>🥷</span><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>📝Posts</a><a class=menu-item href=/tags/ title>🏷️Tags</a><a class=menu-item href=/categories/ title>📚Categories</a><a class=menu-item href=/projects/ title>🔬Projects</a><a class=menu-item href=/about/ title>🥷About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Free space on disk for Linux distros</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://0xninja.fr title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>0xNinja</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2021-03-25>2021-03-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;455 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#package-manager-cache>Package manager cache</a></li><li><a href=#docker>Docker</a></li><li><a href=#sort-disk-usage>Sort disk usage</a></li></ul></nav></div></div><div class=content id=content><p>Recently I wanted to run a MySQL Docker container and encountered a tragical error:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Switching to dedicated user &#39;mysql&#39;
</span></span><span class=line><span class=cl>simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.31-1debian10 started.
</span></span><span class=line><span class=cl>simple_db | 2021-03-25 10:54:04+00:00 [Note] [Entrypoint]: Initializing database files
</span></span><span class=line><span class=cl>simple_db | 2021-03-25T10:54:04.578298Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
</span></span><span class=line><span class=cl>simple_db | 2021-03-25T10:54:04.580054Z 0 [ERROR] --initialize specified but the data directory has files in it. Aborting.
</span></span><span class=line><span class=cl>simple_db | 2021-03-25T10:54:04.580073Z 0 [ERROR] Aborting
</span></span><span class=line><span class=cl>simple_db | simple_db exited with code 1
</span></span></code></pre></td></tr></table></div></div><p>I was really surprised while reading this one, because the container was working well minutes before. After reading the documentation, and searching on the web for more info, nothing worked for me: the container would not run.</p><p>I decided to check for docker-compose updates with my package manager, and guess what? No more space on my root partition 😫</p><p>Everybody who played around with Linux distro had one day this view:</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/free-space-on-disk/root-full.png data-srcset="/free-space-on-disk/root-full.png, /free-space-on-disk/root-full.png 1.5x, /free-space-on-disk/root-full.png 2x" data-sizes=auto alt=/free-space-on-disk/root-full.png title="Root partition full" width=540 height=260></p><p>How to free disk space on Linux? I will try to show a couple of ways I managed to free space on my root partition.</p><h2 id=package-manager-cache>Package manager cache</h2><blockquote><p>As I am running on Archlinux, my package manager might be different as yours (ie. I use <code>pacman</code> and not <code>apt</code> so be carefull).</p></blockquote><p>The first thing I did was to clear my pacman cache, because I knew it would free some space for sure:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -Scc
</span></span></code></pre></td></tr></table></div></div><p>You can check this blog post which explains how to deal with pacman cache: <a href=https://ostechnix.com/recommended-way-clean-package-cache-arch-linux/ target=_blank rel="noopener noreffer"></a></p><p>With that I cleared almost 30G of data on my disk:</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/free-space-on-disk/root-mid.png data-srcset="/free-space-on-disk/root-mid.png, /free-space-on-disk/root-mid.png 1.5x, /free-space-on-disk/root-mid.png 2x" data-sizes=auto alt=/free-space-on-disk/root-mid.png title="Root partition 50% free" width=430 height=246></p><h2 id=docker>Docker</h2><p>Yeah, freeing 30G is pretty satisfying, but imagine freeing more. Joking. But imagine anyway.</p><p>I use Docker a lot, especially while working for school projects or CTFs, so I thought about checking my images and trying to free some more space.</p><p>After running <code>sudo docker images</code> I realized I needed to clean those. I mean, there was like 100 images that I do not use anymore (yes, InterIUT challenges, I talk about you 🥲 ).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo docker images prune
</span></span></code></pre></td></tr></table></div></div><p>This freed 2G on the disk, I was happy about that, but I saw that Docker was still taking too much space here, like 15G could be saved. I realized that Docker volumes where still there, and I decided to remove them.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo docker volume prune
</span></span></code></pre></td></tr></table></div></div><p>Leading me with a total of 40G freed in minutes!</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/free-space-on-disk/root-low.png data-srcset="/free-space-on-disk/root-low.png, /free-space-on-disk/root-low.png 1.5x, /free-space-on-disk/root-low.png 2x" data-sizes=auto alt=/free-space-on-disk/root-low.png title="Root partition 35% free" width=431 height=209></p><h2 id=sort-disk-usage>Sort disk usage</h2><p>While troubleshouting my disk usage, I used this command to sort by usage:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo du / -x -d <span class=m>1</span> <span class=p>|</span> sort -n
</span></span></code></pre></td></tr></table></div></div><p>You can then investigate which directory is taking most usage on your disk.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-03-25</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/free-space-on-disk/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://0xninja.fr/free-space-on-disk/ data-title="Free space on disk for Linux distros" data-via=0x_Ninja data-hashtags=disk,linux,partition><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://0xninja.fr/free-space-on-disk/ data-hashtag=disk><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://0xninja.fr/free-space-on-disk/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://0xninja.fr/free-space-on-disk/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/disk/>disk</a>,&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/partition/>partition</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/htb-ready/ class=prev rel=prev title="📦 HTB - Ready"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>📦 HTB - Ready</a>
<a href=/tldr-tldr/ class=next rel=next title="🚀 TL;DR - What is the 'TL;DR' series?">🚀 TL;DR - What is the 'TL;DR' series?<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://0xninja.fr target=_blank>0xNinja</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},data:{"id-1":"0xNinja","id-2":"0xNinja"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},twemoji:!0,typeit:{cursorChar:"|",cursorSpeed:1500,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:5e3,speed:150}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>